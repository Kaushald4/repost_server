syntax = "proto3";

package community.v1;

import "community/v1/enums.proto";
import "community/v1/media.proto";
import "community/v1/rules.proto";
import "community/v1/counts.proto";

message Cursor {
  string createdAt = 1;
  string id = 2;
}

message CommunitySummary {
  string id = 1;
  string name = 2;
  string title = 3;

  Media icon = 4;
  Media banner = 5;

  CommunityInfoCount counts = 6;

  string createdAt = 7;
  string updatedAt = 8;
}

message Community {
  string id = 1;
  string name = 2;
  string title = 3;
  string description = 4;

  string ownerId = 5;

  CommunityVisibility visibility = 6;
  CommunityStatus status = 7;

  Media icon = 8;
  Media banner = 9;

  repeated CommunityRule rules = 10;
  CommunityInfoCount counts = 11;

  string createdAt = 12;
  string updatedAt = 13;

  repeated Moderator moderators = 14;
}

message Moderator {
  string id = 1;
  string userId = 2;
  string communityId = 3;
  string invitedAt = 4;
  string respondedAt = 5;
  CommunityModeratorRole role = 6;
  CommunityModeratorStatus status = 7;
}

message CommunityPage {
  Community community = 1;
  ViewerContext viewerContext = 2;
}


message ViewerContext {
  bool isMember = 1;
  bool isModerator = 2;
  CommunityModeratorRole moderatorRole = 3;
}

message CommunityResponse {
  Community community = 1;
}


message DeleteCommunityResponse {
  bool success = 1;
}


message CommunityMembershipResponse {
  bool exists = 1;
  optional string communityId = 2;
  optional string userId = 3;
  optional string id = 4;
  optional CommunityMemberStatus status = 5;
  optional string joinedAt = 6;
  optional string leftAt = 7;
  optional string bannedAt = 8;
}


message JoinCommunityResponse {
  bool success = 1;
}